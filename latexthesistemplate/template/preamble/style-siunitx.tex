\IfDefined{sisetup}{%

\sisetup{%
  mode = math, % text is printed using a math font
  mode = match, 
  propagate-math-font = true,
  reset-math-version = false, 
  reset-text-family = false,
  reset-text-series = false, 
  reset-text-shape = false,
  text-family-to-math = true, 
  text-series-to-math = true,
  uncertainty-mode = separate
}


\IfDefined{iflanguage}{%
  \iflanguage{ngerman}{%
    \sisetup{%
      exponent-product = \cdot,
      number-unit-separator=\text{\,},
      output-decimal-marker={\text{,}},
    }
  }
}
% see: https://comp.text.tex.narkive.com/apfej9AB/siunitx-nicefrac-never-applied
\let\nicefrac\sfrac

% Emulate units package, sort of
\IfUndefined{unit}{
	\NewDocumentCommand\unit{om}{%
	  \IfNoValueTF{#1}
	    {\si{#2}}
	    {\SI{#1}{#2}}%
	}
	\NewDocumentCommand\unitfrac{omm}{%
	  \IfNoValueTF{#1}
	    {\si{\sfrac{#2}{#3}}}
	    {\SI{#1}{\sfrac{#2}{#3}}}%
	}
}
} % end: \IfDefined